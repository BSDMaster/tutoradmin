<!DOCTYPE html>
<html>

<head>

</head>

<body>
    <div>
        <ol class="breadcrumb">
            <li class="breadcrumb-item active">หน้าหลัก</li>
        </ol>
    </div>
    <br>
    <br>
    <div class="container">
        <ul class="nav nav-tabs">
            <li class="nav-item active">
                <a data-toggle="tab" href="#tabverifytutor">รายการติวเตอร์ที่รอการอนุมัติ&nbsp;&nbsp;
                    <span class="badge badge-pill badge-danger" id="badgenum1"></span>
                </a>
            </li>
            <li class="nav-item">
                <a data-toggle="tab" href="#tabverifypayment">รายการรอตรวจสอบผลการชำระเงิน&nbsp;&nbsp;
                    <span class="badge badge-pill badge-danger" id="badgenum2"></span>
                </a>
            </li>
            <li class="nav-item">
                <a data-toggle="tab" href="#tabcancelclassbytutor">รายการคำร้องขอยกเลิกงานสอน&nbsp;&nbsp;
                    <span class="badge badge-pill badge-danger" id="badgenum3"></span>
                </a>
            </li>
            <li class="nav-item">
                <a data-toggle="tab" href="#tabcancelclassbystudent">รายการคำร้องขอยกเลิกการลงทะเบียนเรียน&nbsp;&nbsp;
                    <span class="badge badge-pill badge-danger" id="badgenum4"></span>
                </a>
            </li>
            <li class="nav-item">
                <a data-toggle="tab" href="#tabchangetutor">รายการคำร้องขอเปลี่ยนติวเตอร์&nbsp;&nbsp;
                    <span class="badge badge-pill badge-danger" id="badgenum5"></span>
                </a>
            </li>

        </ul>

        <div id="mainTabContent" class="tab-content">
            <div class="tab-pane fade in active" id="tabverifytutor">
                <p>
                    <table id="gridTab1Staff" class="table table-condensed table-hover table-striped">
                        <thead>
                            <tr>
                                <th data-column-id="name" data-width="30%">ชื่อ นามสกุล</th>
                                <th data-column-id="sex" data-width="10%">เพศ</th>
                                <th data-column-id="tel" data-width="20%">เบอร์โทรศัพท์</th>
                                <th data-column-id="requestdate" data-width="20%">วันที่สมัครสมาชิก</th>
                                <th data-column-id="action" data-width="20%" data-sortable="false" data-searchable="false"></th>
                            </tr>
                        </thead>
                    </table>
            </div>
            <div class="tab-pane fade" id="tabverifypayment">
                <p>
                    <table id="gridTab2Staff" class="table table-condensed table-hover table-striped">
                        <thead>
                            <tr>
                                <th data-column-id="recid" data-width="10%">รหัสแนะนำงานสอน</th>
                                <th data-column-id="subject" data-width="10%">ชื่อวิชา</th>
                                <th data-column-id="requester" data-width="20%">ชื่อผู้ชำระเงิน</th>
                                <th data-column-id="requestdate" data-width="20%">วันที่ชำระเงิน</th>
                                <th data-column-id="action" data-width="20%" data-sortable="false" data-searchable="false"></th>
                            </tr>
                        </thead>
                    </table>
                </p>
            </div>
            <div class="tab-pane fade" id="tabcancelclassbytutor">
                <p>
                    <table id="gridTab3Staff" class="table table-condensed table-hover table-striped">
                        <thead>
                            <tr>
                                <th data-column-id="requestno" data-width="10%">รหัสคำร้อง</th>
                                <th data-column-id="reason" data-width="30%">สาเหตุ</th>
                                <th data-column-id="requester" data-width="20%">ชื่อผู้ยื่นคำร้อง</th>
                                <th data-column-id="requestdate" data-width="20%">วันที่ยื่นคำร้อง</th>
                                <th data-column-id="action" data-width="20%" data-sortable="false" data-searchable="false"></th>
                            </tr>
                        </thead>
                    </table>
                </p>
            </div>
            <div class="tab-pane fade" id="tabcancelclassbystudent">
                <p>
                    <table id="gridTab4Staff" class="table table-condensed table-hover table-striped">
                        <thead>
                            <tr>
                                <th data-column-id="requestno" data-width="10%">รหัสคำร้อง</th>
                                <th data-column-id="reason" data-width="30%">สาเหตุ</th>
                                <th data-column-id="requester" data-width="20%">ชื่อผู้ยื่นคำร้อง</th>
                                <th data-column-id="requestdate" data-width="20%">วันที่ยื่นคำร้อง</th>
                                <th data-column-id="action" data-width="20%" data-sortable="false" data-searchable="false"></th>
                            </tr>
                        </thead>
                    </table>
                </p>
            </div>
            <div class="tab-pane fade" id="tabchangetutor">
                <p>
                    <table id="gridTab5Staff" class="table table-condensed table-hover table-striped">
                        <thead>
                            <tr>
                                <th data-column-id="requestno" data-width="10%">รหัสคำร้อง</th>
                                <th data-column-id="reason" data-width="30%">สาเหตุ</th>
                                <th data-column-id="requester" data-width="20%">ชื่อผู้ยื่นคำร้อง</th>
                                <th data-column-id="requestdate" data-width="20%">วันที่ยื่นคำร้อง</th>
                                <th data-column-id="action" data-width="20%" data-sortable="false" data-searchable="false"></th>
                            </tr>
                        </thead>
                    </table>
                </p>
            </div>
        </div>
    </div>

    <script>
        var _waitingverifytutors;
        var _waitingverifypayment;
        var _cancelbytutor;
        var _cancelbystudent;
        var _changetutor;

        jQuery(document).ready(function () {
            console.log("ready!");
            initialStaffTab1();
            initialStaffTab2();
            initialStaffTab3();
            initialStaffTab4();
            initialStaffTab5();

        });
        function initialStaffTab1() {
            $.ajax({
                type: "GET",

                url: _gServiceURL + "tutor/regislist",
                contentType: "application/json; charset=utf-8",
                crossDomain: true,
                dataType: "json",
                success: function (data, status, jqXHR) {
                    _waitingverifytutors = data.data.tutorProfileViews;
                    console.log(_waitingverifytutors);
                    if (data.data.size != 0) {
                        $('#badgenum1').text(data.data.size);
                        for (var i = 0; i < _waitingverifytutors.length; i++) {
                            appendstafftab1(_waitingverifytutors[i], i);
                        }
                    } else {
                        $('#badgenum1').hide();
                    }

                },
                error: function (jqXHR, status) {
                    $('#badgenum1').hide();
                }

            });
        }
        function initialStaffTab2() {
            $.ajax({
                type: "GET",

                url: _gServiceURL + "rectutor/waitingverifypayment",
                contentType: "application/json; charset=utf-8",
                crossDomain: true,
                dataType: "json",
                success: function (data, status, jqXHR) {
                    _waitingverifypayment = data.data.classRequests;
                    console.log(_waitingverifypayment);
                    if (data.data.size != 0) {
                        $('#badgenum2').text(data.data.size);
                        for (var i = 0; i < _waitingverifypayment.length; i++) {
                            appendstafftab2(_waitingverifypayment[i], i);
                        }
                    } else {
                        $('#badgenum2').hide();
                    }

                },
                error: function (jqXHR, status) {
                    $('#badgenum2').hide();
                }

            });


        }
        function initialStaffTab3() {
            $.ajax({
                type: "GET",

                url: _gServiceURL + "classrequest/requestcancelbytutorlist",
                contentType: "application/json; charset=utf-8",
                crossDomain: true,
                dataType: "json",
                success: function (data, status, jqXHR) {
                    _cancelbytutor = data.data.classRequests;
                    console.log(_cancelbytutor);
                    if (data.data.size != 0) {
                        $('#badgenum3').text(data.data.size);
                        for (var i = 0; i < _cancelbytutor.length; i++) {
                            appendstafftab3(_cancelbytutor[i], i);
                        }
                    } else {
                        $('#badgenum3').hide();
                    }

                },
                error: function (jqXHR, status) {
                    $('#badgenum3').hide();
                }

            });
        }
        function initialStaffTab4() {
            $.ajax({
                type: "GET",
                url: _gServiceURL + "classrequest/requestcancelbystudentlist",
                contentType: "application/json; charset=utf-8",
                crossDomain: true,
                dataType: "json",
                success: function (data, status, jqXHR) {
                    _cancelbystudent = data.data.classRequests;
                    console.log(_cancelbystudent);
                    if (data.data.size != 0) {
                        $('#badgenum4').text(data.data.size);
                        for (var i = 0; i < _cancelbystudent.length; i++) {
                            appendstafftab4(_cancelbystudent[i], i);
                        }
                    } else {
                        $('#badgenum4').hide();
                    }

                },
                error: function (jqXHR, status) {
                    $('#badgenum4').hide();
                }

            });
        }
        function initialStaffTab5() {
            $.ajax({
                type: "GET",
                url: _gServiceURL + "classrequest/requestcancelbytutorlist",
                contentType: "application/json; charset=utf-8",
                crossDomain: true,
                dataType: "json",
                success: function (data, status, jqXHR) {
                    _changetutor = data.data.classRequests;
                    console.log(_changetutor);
                    if (data.data.size != 0) {
                        $('#badgenum4').text(data.data.size);
                        for (var i = 0; i < _changetutor.length; i++) {
                            appendstafftab4(_changetutor[i], i);
                        }
                    } else {
                        $('#badgenum4').hide();
                    }

                },
                error: function (jqXHR, status) {
                    $('#badgenum4').hide();
                }

            });
        }

        var gridTab1Staff = $("#gridTab1Staff").bootgrid({
            navigation: 0,
            rowSelect: true,
            labels: {
                noResults: 'ไม่พบรายการ'
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            gridTab1Staff.find("tr").on("click", function (e) {
                console.log("click");
            });
            gridTab1Staff.find(".command-open").on("click", function (e) {
                console.log("open");
                var i = parseInt($(this).data("row-id"));
                tutorDetail(i);
            });
        });
        var gridTab2Staff = $("#gridTab2Staff").bootgrid({
            navigation: 0,
            rowSelect: true,
            labels: {
                noResults: 'ไม่พบรายการ'
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            gridTab2Staff.find("tr").on("click", function (e) {
                console.log("click");
            });
            gridTab2Staff.find(".command-open").on("click", function (e) {
                console.log("open");
                var i = parseInt($(this).data("row-id"));
                verifypaymentDetail(i);
            });
        });
        var gridTab3Staff = $("#gridTab3Staff").bootgrid({
            navigation: 0,
            rowSelect: true,
            labels: {
                noResults: 'ไม่พบรายการ'
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            gridTab3Staff.find("tr").on("click", function (e) {
                console.log("click");
            });
            gridTab3Staff.find(".command-open").on("click", function (e) {
                console.log("open");
                var i = parseInt($(this).data("row-id"));
                cancelbytutorDetail(i);
            });
        });
        var gridTab4Staff = $("#gridTab4Staff").bootgrid({
            navigation: 0,
            rowSelect: true,
            labels: {
                noResults: 'ไม่พบรายการ'
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            gridTab4Staff.find("tr").on("click", function (e) {
                console.log("click");
            });
            gridTab4Staff.find(".command-open").on("click", function (e) {
                console.log("open");
                var i = parseInt($(this).data("row-id"));
                cancelbystudentDetail(i);
            });
        });
        var gridTab5Staff = $("#gridTab5Staff").bootgrid({
            navigation: 0,
            rowSelect: true,
            labels: {
                noResults: 'ไม่พบรายการ'
            }
        }).on("loaded.rs.jquery.bootgrid", function () {
            gridTab5Staff.find("tr").on("click", function (e) {
                console.log("click");
            });
            gridTab5Staff.find(".command-open").on("click", function (e) {
                console.log("open");
                var i = parseInt($(this).data("row-id"));
                changetutorDetail(i);
            });
        });
        function appendstafftab1(request, i) {
            gridTab1Staff.bootgrid("append", [
                {
                    "name": request.turName,
                    "sex": request.turSex,
                    "tel": request.turTel,
                    "requestdate": request.turCreatedDate,
                    "action": "<button type='button' class='btn btn-primary btn-lg command-open' data-row-id='" + i + "'>ดูรายละเอียด</button>"
                }
            ]);
        }
        function appendstafftab2(request, i) {
            gridTab2Staff.bootgrid("append", [
                {
                    "recid": request.recId,
                    "subject": request.subjectAndGroupDetailName,
                    "requester": request.tutorName,
                    "requestdate": request.paidDate,
                    "action": "<button type='button' class='btn btn-primary btn-lg command-open' data-row-id='" + i + "'>ดูรายละเอียด</button>"
                }
            ]);
        }
        function appendstafftab3(request, i) {
            gridTab3Staff.bootgrid("append", [
                {
                    "requestno": request.reqId,
                    "reason": request.reqReason,
                    "requester": request.reqRequester,
                    "requestdate": request.reqCreatedDate,
                    "action": "<button type='button' class='btn btn-primary btn-lg command-open' data-row-id='" + i + "'>ดูรายละเอียด</button>"
                }
            ]);
        }
        function appendstafftab4(request, i) {
            gridTab4Staff.bootgrid("append", [
                {
                    "requestno": request.reqId,
                    "reason": request.reqReason,
                    "requester": request.reqRequester,
                    "requestdate": request.reqCreatedDate,
                    "action": "<button type='button' class='btn btn-primary btn-lg command-open' data-row-id='" + i + "'>ดูรายละเอียด</button>"
                }
            ]);
        }
        function appendstafftab5(request, i) {
            gridTab5Staff.bootgrid("append", [
                {
                    "requestno": request.reqId,
                    "reason": request.reqReason,
                    "requester": request.reqRequester,
                    "requestdate": request.reqCreatedDate,
                    "action": "<button type='button' class='btn btn-primary btn-lg command-open' data-row-id='" + i + "'>ดูรายละเอียด</button>"
                 }
            ]);
        }

        function tutorDetail(i) {
            _gSelectedTurId = _waitingverifytutors[i].turId;
            console.log(_waitingverifytutors[i]);
            changePage('./html/tutordetail.html');
        }
        function verifypaymentDetail(i){
            _gSelectedReqId = _waitingverifypayment[i].reqId;
            changePage('./html/requestclassdetail.html');
        }
        function cancelbytutorDetail(i) {
            _gSelectedReqId = _cancelbytutor[i].reqId;
            changePage('./html/requestclassdetail.html');
        }
        function cancelbystudentDetail(i) {
            _gSelectedReqId = _cancelbystuent[i].reqId;
            changePage('./html/requestclassdetail.html');
        }
        function changetutorDetail(i) {
            _gSelectedReqId = _changetutor[i].reqId;
            changePage('./html/requestclassdetail.html');
        }


    </script>
</body>

</html>